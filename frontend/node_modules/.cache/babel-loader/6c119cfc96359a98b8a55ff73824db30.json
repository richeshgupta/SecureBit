{"ast":null,"code":"import React, { useEffect, useContext } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport { activeChatAction } from \"./stateManagement/actions\";\nimport { store } from \"./stateManagement/store\"; // const SOCKET_URL = \"http://api.securebit.tech:2086/\";\n// const SOCKET_URL = \"http://localhost:9000/\";\n\nlet socket;\n\nconst SocketService = () => {\n  const {\n    state: {\n      userDetail\n    },\n    dispatch\n  } = useContext(store);\n\n  const setupSocket = () => {\n    socket = openSocket(SOCKET_URL);\n    socket.on(\"command\", data => {\n      if (!userDetail) return;\n      if (userDetail.id !== data.receiver) return;\n      dispatch({\n        type: activeChatAction,\n        payload: true\n      });\n    });\n  };\n\n  useEffect(setupSocket, [userDetail]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nexport default SocketService;\n\nconst sendSocket = data => {\n  socket.emit(\"command\", {\n    type: data.type,\n    id: data.id,\n    content: data.content\n  });\n};\n\nexport const sendTestSocket = data => {\n  socket.emit(\"command\", data);\n};","map":{"version":3,"sources":["/home/richeshgupta/Desktop/SecureBit/frontend/src/socketService.js"],"names":["React","useEffect","useContext","openSocket","activeChatAction","store","socket","SocketService","state","userDetail","dispatch","setupSocket","SOCKET_URL","on","data","id","receiver","type","payload","sendSocket","emit","content","sendTestSocket"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,KAAT,QAAsB,yBAAtB,C,CAEA;AACA;;AACA,IAAIC,MAAJ;;AAEA,MAAMC,aAAa,GAAG,MAAM;AAC1B,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF,KADH;AAEJC,IAAAA;AAFI,MAGFR,UAAU,CAACG,KAAD,CAHd;;AAKA,QAAMM,WAAW,GAAG,MAAM;AACxBL,IAAAA,MAAM,GAAGH,UAAU,CAACS,UAAD,CAAnB;AACAN,IAAAA,MAAM,CAACO,EAAP,CAAU,SAAV,EAAsBC,IAAD,IAAU;AAC7B,UAAI,CAACL,UAAL,EAAiB;AACjB,UAAIA,UAAU,CAACM,EAAX,KAAkBD,IAAI,CAACE,QAA3B,EAAqC;AACrCN,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEb,gBAAR;AAA0Bc,QAAAA,OAAO,EAAE;AAAnC,OAAD,CAAR;AACD,KAJD;AAKD,GAPD;;AASAjB,EAAAA,SAAS,CAACU,WAAD,EAAc,CAACF,UAAD,CAAd,CAAT;AAEA,sBAAO,yCAAP;AACD,CAlBD;;AAoBA,eAAeF,aAAf;;AAEA,MAAMY,UAAU,GAAIL,IAAD,IAAU;AAC3BR,EAAAA,MAAM,CAACc,IAAP,CAAY,SAAZ,EAAuB;AACrBH,IAAAA,IAAI,EAAEH,IAAI,CAACG,IADU;AAErBF,IAAAA,EAAE,EAAED,IAAI,CAACC,EAFY;AAGrBM,IAAAA,OAAO,EAAEP,IAAI,CAACO;AAHO,GAAvB;AAKD,CAND;;AAQA,OAAO,MAAMC,cAAc,GAAIR,IAAD,IAAU;AACtCR,EAAAA,MAAM,CAACc,IAAP,CAAY,SAAZ,EAAuBN,IAAvB;AACD,CAFM","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport { activeChatAction } from \"./stateManagement/actions\";\nimport { store } from \"./stateManagement/store\";\n\n// const SOCKET_URL = \"http://api.securebit.tech:2086/\";\n// const SOCKET_URL = \"http://localhost:9000/\";\nlet socket;\n\nconst SocketService = () => {\n  const {\n    state: { userDetail },\n    dispatch,\n  } = useContext(store);\n\n  const setupSocket = () => {\n    socket = openSocket(SOCKET_URL);\n    socket.on(\"command\", (data) => {\n      if (!userDetail) return;\n      if (userDetail.id !== data.receiver) return;\n      dispatch({ type: activeChatAction, payload: true });\n    });\n  };\n\n  useEffect(setupSocket, [userDetail]);\n\n  return <></>;\n};\n\nexport default SocketService;\n\nconst sendSocket = (data) => {\n  socket.emit(\"command\", {\n    type: data.type,\n    id: data.id,\n    content: data.content,\n  });\n};\n\nexport const sendTestSocket = (data) => {\n  socket.emit(\"command\", data);\n};\n"]},"metadata":{},"sourceType":"module"}