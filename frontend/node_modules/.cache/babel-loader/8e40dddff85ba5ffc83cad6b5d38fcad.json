{"ast":null,"code":"var _jsxFileName = \"/home/richeshgupta/Desktop/project-finish/chatApp-frontend/src/Pages/homeComponents.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport close from \"../assets/close.svg\";\nimport edit from \"../assets/edit.png\";\nimport Loader from \"../components/loader\";\nimport { axiosHandler, errorHandler, getToken } from \"../helper\";\nimport { userDetailAction } from \"../stateManagement/actions\";\nimport { store } from \"../stateManagement/store\";\nimport { PROFILE_URL, FILE_UPLOAD_URL } from \"../urls\";\nexport const UserMain = props => {\n  let _count = 0;\n\n  if (props.count) {\n    if (parseInt(props.count) > 0) {\n      _count = props.count;\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `flex align-center justify-between userMain ${props.clickable ? \"clickable\" : \"\"}`,\n    onClick: () => props.clickable && props.onClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    isV2: true,\n    name: props.name,\n    profilePicture: props.profilePicture,\n    caption: props.caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  }), _count > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"counter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 23\n    }\n  }, props.count));\n};\nexport const UserAvatar = props => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `userAvatar ${props.isV2 ? \"version2\" : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageCon\",\n    style: {\n      backgroundImage: `url(\"${props.profilePicture}\")`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, props.name), !props.noStatus && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"subContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 29\n    }\n  }, props.caption)));\n};\nexport const ChatBubble = props => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `chatbubbleCon ${props.bubbleType}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chatbubble\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, props.message), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, props.time)));\n};\nlet profileRef;\nexport const ProfileModal = props => {\n  const [profileData, setProfileData] = useState({ ...props.userDetail,\n    user_id: props.userDetail.user.id\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [pp, setPP] = useState(props.userDetail.profile_picture ? props.userDetail.profile_picture.file_upload : \"\");\n  const {\n    dispatch\n  } = useContext(store);\n\n  const submit = async e => {\n    e.preventDefault();\n    setSubmitted(true);\n    const token = await getToken(props);\n    const url = PROFILE_URL + `${props.userDetail.first_name ? `/${props.userDetail.id}` : \"\"}`;\n    const method = props.userDetail.first_name ? \"patch\" : \"post\";\n    const profile = await axiosHandler({\n      method,\n      url,\n      data: profileData,\n      token\n    }).catch(e => alert(errorHandler(e)));\n    setSubmitted(false);\n\n    if (profile) {\n      props.setClosable();\n      dispatch({\n        type: userDetailAction,\n        payload: profile.data\n      });\n    }\n  };\n\n  const onChange = e => {\n    setProfileData({ ...profileData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  useEffect(() => {\n    if (props.visible) {\n      setProfileData({ ...props.userDetail,\n        user_id: props.userDetail.user.id\n      });\n      setPP(props.userDetail.profile_picture ? props.userDetail.profile_picture.file_upload : \"\");\n    }\n  }, [props.visible]);\n\n  const handleOnChange = async e => {\n    let data = new FormData();\n    data.append(\"file_upload\", e.target.files[0]);\n    setUploading(true);\n    const result = await axiosHandler({\n      method: \"post\",\n      url: FILE_UPLOAD_URL,\n      data\n    }).catch(e => console.log(e));\n    setUploading(false);\n\n    if (result) {\n      setPP(result.data.file_upload);\n      setProfileData({ ...profileData,\n        profile_picture_id: result.data.id\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `modalContain ${props.visible ? \"open\" : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, props.view ? \"View\" : \"Update\", \" Profile\"), props.closable && /*#__PURE__*/React.createElement(\"img\", {\n    src: close,\n    onClick: props.close,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 30\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"content\",\n    onSubmit: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"leftHook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageCon\",\n    style: {\n      backgroundImage: `url(${pp})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    style: {\n      display: \"none\"\n    },\n    ref: e => profileRef = e,\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }), !props.view && /*#__PURE__*/React.createElement(React.Fragment, null, uploading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"point\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 31\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"point\",\n    onClick: () => profileRef.click(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, \"Change Picture\", /*#__PURE__*/React.createElement(\"img\", {\n    src: edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dataInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"First name\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"first_name\",\n    value: profileData.first_name,\n    onChange: onChange,\n    disabled: props.view,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, \"Last name\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"last_name\",\n    value: profileData.last_name,\n    onChange: onChange,\n    disabled: props.view,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, \"Caption\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"caption\",\n    value: profileData.caption,\n    onChange: onChange,\n    disabled: props.view,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, \"About\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"about\",\n    value: profileData.about,\n    onChange: onChange,\n    disabled: props.view,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  })))), !props.view && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: submitted,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 28\n    }\n  }, submitted ? /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  })) : \"Update\"))));\n};","map":{"version":3,"sources":["/home/richeshgupta/Desktop/project-finish/chatApp-frontend/src/Pages/homeComponents.js"],"names":["React","useContext","useState","useEffect","edit","Loader","axiosHandler","errorHandler","getToken","userDetailAction","store","PROFILE_URL","FILE_UPLOAD_URL","UserMain","props","_count","count","parseInt","clickable","onClick","name","profilePicture","caption","UserAvatar","isV2","backgroundImage","noStatus","ChatBubble","bubbleType","message","time","profileRef","ProfileModal","profileData","setProfileData","userDetail","user_id","user","id","submitted","setSubmitted","uploading","setUploading","pp","setPP","profile_picture","file_upload","dispatch","submit","e","preventDefault","token","url","first_name","method","profile","data","catch","alert","setClosable","type","payload","onChange","target","value","visible","handleOnChange","FormData","append","files","result","console","log","profile_picture_id","view","closable","close","display","click","last_name","about"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport close from \"../assets/close.svg\";\nimport edit from \"../assets/edit.png\";\nimport Loader from \"../components/loader\";\nimport { axiosHandler, errorHandler, getToken } from \"../helper\";\nimport { userDetailAction } from \"../stateManagement/actions\";\nimport { store } from \"../stateManagement/store\";\nimport { PROFILE_URL, FILE_UPLOAD_URL } from \"../urls\";\n\nexport const UserMain = (props) => {\n  let _count = 0;\n  if(props.count){\n    if(parseInt(props.count) > 0){\n      _count = props.count;\n    }\n  }\n  return (\n    <div\n      className={`flex align-center justify-between userMain ${\n        props.clickable ? \"clickable\" : \"\"\n      }`}\n      onClick={() => props.clickable && props.onClick()}\n    >\n      <UserAvatar\n        isV2\n        name={props.name}\n        profilePicture={props.profilePicture}\n        caption={props.caption}\n      />\n      {\n        _count > 0 && <div className=\"counter\">{props.count}</div>\n      }\n      \n    </div>\n  );\n};\n\nexport const UserAvatar = (props) => {\n  return (\n    <div className={`userAvatar ${props.isV2 ? \"version2\" : \"\"}`}>\n      <div\n        className=\"imageCon\"\n        style={{\n          backgroundImage: `url(\"${props.profilePicture}\")`,\n        }}\n      />\n      <div className=\"contents\">\n        <div className=\"name\">{props.name}</div>\n        {!props.noStatus && <div className=\"subContent\">{props.caption}</div>}\n      </div>\n    </div>\n  );\n};\n\nexport const ChatBubble = (props) => {\n  return (\n    <div className={`chatbubbleCon ${props.bubbleType}`}>\n      <div className=\"chatbubble\">\n        <p>{props.message}</p>\n        <div className=\"time\">{props.time}</div>\n      </div>\n    </div>\n  );\n};\n\nlet profileRef;\n\nexport const ProfileModal = (props) => {\n  const [profileData, setProfileData] = useState({\n    ...props.userDetail,\n    user_id: props.userDetail.user.id,\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [pp, setPP] = useState(props.userDetail.profile_picture ? props.userDetail.profile_picture.file_upload : \"\")\n\n  const { dispatch } = useContext(store);\n\n  const submit = async (e) => {\n    e.preventDefault();\n    setSubmitted(true);\n    const token = await getToken(props);\n    const url =\n      PROFILE_URL +\n      `${props.userDetail.first_name ? `/${props.userDetail.id}` : \"\"}`;\n    const method = props.userDetail.first_name ? \"patch\" : \"post\";\n    const profile = await axiosHandler({\n      method,\n      url,\n      data: profileData,\n      token,\n    }).catch((e) => alert(errorHandler(e)));\n    setSubmitted(false);\n    if (profile) {\n      props.setClosable();\n      dispatch({ type: userDetailAction, payload: profile.data });\n    }\n  };\n\n  const onChange = (e) => {\n    setProfileData({\n      ...profileData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  useEffect(() => {\n    if(props.visible){\n      setProfileData({\n        ...props.userDetail,\n        user_id: props.userDetail.user.id,\n      })\n      setPP(props.userDetail.profile_picture ? props.userDetail.profile_picture.file_upload : \"\")\n    }\n  }, [props.visible])\n\n  const handleOnChange = async (e) => {\n    let data = new FormData()\n    data.append(\"file_upload\", e.target.files[0])\n    setUploading(true)\n    const result = await axiosHandler({method:\"post\", url:FILE_UPLOAD_URL, data}).catch(\n      e => console.log(e)\n    )\n    setUploading(false)\n    if(result){\n      setPP(result.data.file_upload);\n      setProfileData({...profileData, profile_picture_id:result.data.id})\n    }\n  }\n\n  return (\n    <div className={`modalContain ${props.visible ? \"open\" : \"\"}`}>\n      <div className=\"content-inner\">\n        <div className=\"header\">\n          <div className=\"title\">{props.view ? \"View\" : \"Update\"} Profile</div>\n          {props.closable && <img src={close} onClick={props.close} />}\n        </div>\n        <form className=\"content\" onSubmit={submit}>\n          <div className=\"inner\">\n            <div className=\"leftHook\">\n              <div\n                className=\"imageCon\"\n                style={{\n                  backgroundImage: `url(${pp})`,\n                }}\n              />\n              <input type=\"file\" style={{display:\"none\"}} ref={e => profileRef = e} onChange={handleOnChange} />\n             {\n               !props.view && <>\n               {\n                  uploading ? <div className=\"point\">\n                  Loading...\n                </div>:\n                  <div className=\"point\" onClick={() => profileRef.click()}>\n                  Change Picture\n                  <img src={edit} />\n                </div>\n                }\n               </>\n             }\n            </div>\n            <div className=\"dataInput\">\n              <label>\n                <span>First name</span>\n                <input\n                  name=\"first_name\"\n                  value={profileData.first_name}\n                  onChange={onChange}\n                  disabled={props.view}\n                  required\n                />\n              </label>\n              <label>\n                <span>Last name</span>\n                <input\n                  name=\"last_name\"\n                  value={profileData.last_name}\n                  onChange={onChange}\n                  disabled={props.view}\n                  required\n                />\n              </label>\n              <label>\n                <span>Caption</span>\n                <input\n                  name=\"caption\"\n                  value={profileData.caption}\n                  onChange={onChange}\n                  disabled={props.view}\n                  required\n                />\n              </label>\n              <label>\n                <span>About</span>\n                <textarea\n                  name=\"about\"\n                  value={profileData.about}\n                  onChange={onChange}\n                  disabled={props.view}\n                  required\n                />\n              </label>\n            </div>\n          </div>\n          {\n            !props.view && <button type=\"submit\" disabled={submitted}>\n            {submitted ? (\n              <center>\n                <Loader />\n              </center>\n            ) : (\n              \"Update\"\n            )}\n          </button>\n          }\n        </form>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}